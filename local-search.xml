<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>hexo博客安装配置</title>
    <link href="/2021/01/14/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/01/14/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo博客搭建（ubuntu20-04-Nodejs-Git-SSH-Windows10）"><a href="#Hexo博客搭建（ubuntu20-04-Nodejs-Git-SSH-Windows10）" class="headerlink" title="Hexo博客搭建（ubuntu20.04+Nodejs+Git+SSH+Windows10）"></a>Hexo博客搭建（ubuntu20.04+Nodejs+Git+SSH+Windows10）</h1><p>今天在这里写出Hexo部署在windows上，然后上传到服务器上的一个简易过程，以便以后回过头来看看。</p><h2 id="配置前安装（本地）"><a href="#配置前安装（本地）" class="headerlink" title="配置前安装（本地）"></a>配置前安装（本地）</h2><p>在配置之前，需要安装Nodejs，这个很简单，去官网找一下，下载msi或者zip都可，msi可以直接安装，并且会给你自动配置好环境变量，zip压缩包下载完解压之后，需要配置自己的环境变量。如图：<br><img src="/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png" alt="环境变量配置"><br>    还要下载git，这个自行百度，挺简单的（没遇到坑）。<br>    然后就是下载SSH，使用windows自带cmd输入命令ssh root@你的ip地址，如果显示ssh未知命令，记得去下载openssh，并且安装完之后<strong>系统环境变量</strong>Path里有openssh的bin文件夹，没出现的话自行配置。<br/><br>    这里有个地方，如果你打开没有出现列表而是一行，可以在最前面添加<code>%SystemRoot%</code>，这是时候你再打开就会出现表格形式了。</p><h2 id="配置前安装（服务器）"><a href="#配置前安装（服务器）" class="headerlink" title="配置前安装（服务器）"></a>配置前安装（服务器）</h2><p>我的是阿里云ubuntu20.04。</p><p>首先要安装git（用来push本地生成的静态网页）和nginx（用于托管）</p><div class="code-wrapper"><pre><code class="hljs">    apt-get update    apt-get install git-core nginx</code></pre></div><h3 id="创建私有仓库"><a href="#创建私有仓库" class="headerlink" title="创建私有仓库"></a>创建私有仓库</h3><p>在服务器&#x2F;var&#x2F;repo&#x2F;下创建一个hexo_static的裸仓库，还要修改权限</p><div class="code-wrapper"><pre><code class="hljs">sudo mkdir /var/repo/sudo chown -R $USER:$USER /var/repo/sudo chmod -R 755 /var/repo/然后初始化仓库cd /var/repo/git init --bare hexo_static.git初始化之后应该会有一行说明仓库空的提示</code></pre></div><h3 id="配置nginx静态托管"><a href="#配置nginx静态托管" class="headerlink" title="配置nginx静态托管"></a>配置nginx静态托管</h3><p>创建一个目录，例如&#x2F;var&#x2F;www&#x2F;hexo，这个文件夹用于存放静态文件，然后我们配置nginx访问这个文件夹里的资源</p><div class="code-wrapper"><pre><code class="hljs">sudo mkdir -p /var/www/hexo#修改目录的所有权和权限sudo chown -R $USER:$USER /var/www/hexosudo chmod -R 755 /var/www/hexo#修改 Nginx 的 default 设置sudo vim /etc/nginx/sites-available/default...server &#123; listen 80 default_server;    listen [::]:80 default_server;    root /var/www/hexo; # 需要修改的部分 index index.html index.htm;...将其中的 root 指令指向 /var/www/hexo 目录，就是让客户端默认访问这里的资源</code></pre></div><p>只需修改nginx中default的root就行，这样就指定好了<br>修改完之后重启nginx<br>    <code>sudo service nginx restart</code></p><h3 id="创建git钩子"><a href="#创建git钩子" class="headerlink" title="创建git钩子"></a>创建git钩子</h3><p>在服务器上的裸仓库 <code>hexo_static</code> 创建一个钩子，在满足特定条件时将静态 HTML 文件传送到 Web 服务器的目录下，即 <code>/var/www/hexo</code></p><div class="code-wrapper"><pre><code class="hljs">#在自动生成的 `hooks` 目录下创建一个新的钩子文件vim /var/repo/hexo_static.git/hooks/post-receive#在此文件中添加两行代码，指定 Git 的工作树（源代码）和 Git 目录（配置文件等）#!/bin/bashgit --work-tree=/var/www/hexo --git-dir=/var/repo/hexo_static.git checkout -f#保存退出文件后，需要让该文件变为可执行文件。chmod +x /var/repo/hexo_static.git/hooks/post-receive</code></pre></div><p>到此服务器端配置结束了。</p><h2 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h2><h3 id="hexo安装"><a href="#hexo安装" class="headerlink" title="hexo安装"></a>hexo安装</h3><p>下载完nodejs和git之后，可以开始安装hexo了。首先创建一个博客文件夹，用cmd或者gitbash进入这个文件夹，输入命令：<code>npm install -g hexo-cli</code>，使用<code>hexo -v</code>可以查看版本</p><p>接下来初始化hexo，<code>hexo init myblog</code>，myblog随便叫什么，这里存放的是自己的博客文件，相当于创建了一个blog项目。</p><div class="code-wrapper"><pre><code class="hljs">cd myblog //进入myblog这个文件夹npm install //安装hexo配置所需要的完全包（nodejs的一个用法）</code></pre></div><p>新建完成后，会有以下目录：</p><div class="code-wrapper"><pre><code class="hljs">·node_modules: 依赖包·public：存放生成的页面·scaffolds：生成文章的一些模板·source：用来存放你的文章·themes：主题·** _config.yml: 博客的配置文件**</code></pre></div><p>然后输入以下命令：</p><div class="code-wrapper"><pre><code class="hljs">hexo ghexo server</code></pre></div><p>命令用法自行搜索，不再讲述</p><p>这样就打开了hexo，浏览器中输入<code>localhost:4000</code>就可以看到生成的博客了 可以使用<code>ctrl+c</code>关闭</p><h3 id="本地git配置"><a href="#本地git配置" class="headerlink" title="本地git配置"></a>本地git配置</h3><p>之所以配置本地Hexo是为了自动部署到服务器端的<code>hexo_static</code>裸仓库中，<code>_config.yml</code> 为 Hexo 的主配置文件。首先需要修改的便是博客的<code>URL</code>地址,在<code>_config.yml</code>文件中</p><div class="code-wrapper"><pre><code class="hljs"># URL## If your site is put in a subdirectory, set url as &#39;http://yoursite.com/child&#39; and root as &#39;/child/&#39;url: http://server-ip # 没有绑定域名时填写服务器的实际 IP 地址。root: /permalink: :year/:month/:day/:title/permalink_defaults:</code></pre></div><p>然后修改Deployment部分</p><div class="code-wrapper"><pre><code class="hljs">deploy:type: gitrepo: root@云服务器的IP地址:/var/repo/hexo_staticbranch: master</code></pre></div><p>这里的root是服务器的名称，由于阿里云是root，腾讯云可能是ubuntu，可能出现差异</p><p>到这步就结束了，下面就是把本地生成的文件git到服务器上</p><div class="code-wrapper"><pre><code class="hljs">hexo g &amp;&amp; d</code></pre></div><p><code>hexo g</code>是生成静态文件 <code>hexo d</code>是<code>deployment</code></p><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>可能会遇到说username和password的问题，我们需要配置git才能使用</p><p>命令行输入以下代码</p><div class="code-wrapper"><pre><code class="hljs">git config --global user.name &quot;yourname&quot;git config --global user.email &quot;youremail&quot;</code></pre></div><p><code>yourname</code>和<code>youremail</code>是自己随便写的，相当于注册了以下<br>如果还不行，删除根目录下的文件夹：<code>.deploy_git</code>，重新deploy一下</p><p>前提是ssh配置成功的情况</p><p>还有可能会遇到</p><p><img src="/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/error.png"></p><p>这是由于第一次使用ssh会认证然后这个信息会储存在客户端的<code>known_host</code>中，我们要删除这个配置信息重新连接</p><p>输入：</p><div class="code-wrapper"><pre><code class="hljs">ssh-keygen -R 服务器端的ip地址</code></pre></div><p>然后再次</p><div class="code-wrapper"><pre><code class="hljs">hexo g &amp;&amp; hexo d</code></pre></div><p>如果显示这样，说明部署成功</p><p><img src="/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/success.png"></p><h2 id="几个坑"><a href="#几个坑" class="headerlink" title="几个坑"></a>几个坑</h2><div class="code-wrapper"><pre><code class="hljs">·阿里云记得去阿里云网站找安全组把该开放的端口比如22，80给打开·hexo 在生成静态文件之前最好hexo clean一下，这样清除缓存可以减少一些错误</code></pre></div><p>随笔简写，仅代表个人配置，如有错误，欢迎指出!</p><p>​    </p><p>​        </p><p>​    </p><!-- flag of hidden posts -->]]></content>
    
    
    <categories>
      
      <category>博客搭建</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>hexo</tag>
      
      <tag>fluid主题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo再搭建体验</title>
    <link href="/2021/01/13/hexo%E5%86%8D%E6%90%AD%E5%BB%BA%E4%BD%93%E9%AA%8C/"/>
    <url>/2021/01/13/hexo%E5%86%8D%E6%90%AD%E5%BB%BA%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo搭建过程感受"><a href="#Hexo搭建过程感受" class="headerlink" title="Hexo搭建过程感受"></a>Hexo搭建过程感受</h2><div class="code-wrapper"><pre><code class="hljs">自从去年玩过hexo之后再也没有搭建过了我是真的好久没玩了今天重置了服务器，bug弄得我快崩溃了mmp垃圾</code></pre></div><p><img src="/hexo%E5%86%8D%E6%90%AD%E5%BB%BA%E4%BD%93%E9%AA%8C/haojiahuo.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>博客搭建</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>博客</tag>
      
      <tag>感受</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
